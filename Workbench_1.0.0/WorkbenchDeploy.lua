---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Senef.
--- DateTime: 15/11/2022 10:34
---

WorkBenchDeploy = {
    count = 0,
    workbenches = {}
}

---Create a new workbench deployer context. Only one should be used
---@return self
function WorkBenchDeploy:new()
    local self = {}
    setmetatable(self,WorkBenchDeploy)
    if(self.alreadyExistWorkbench)then
        return nil
    end


    return self
end

function WorkBenchDeploy:deploy(assembler)
    -- configure the real assembler
    -- reset the assembler if the recipe contain fluid
    local workbench = WorkBench:new(assembler)
table.insert(self.workbenches,workbench)
    return  workbench
end

function WorkBenchDeploy:alreadyExistWorkbench(assembler)
    for _, w in pairs(global.Workable) do

        local positionWork = w.luaEntity.position
        local positionAssemb = assembler.position
        if  (positionWork.x == positionAssemb.x) and (positionWork.y == positionAssemb.luaEntity) and w.luaEntity.name == assembler.name then
            return true
        end
    end

    return false
end

function WorkBenchDeploy:destroy(workbench)


   return Utils:removeAndReindex(self.workbenches,workbench.index)

end